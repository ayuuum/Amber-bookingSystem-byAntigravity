# 事業者UI/UX改善提案

> 評価日: 2024-12-24  
> 目的: 事業者（店舗管理者）向け管理画面のUI/UXを「抜群」「最高」レベルに引き上げる

---

## 📊 現状評価

### ✅ 良い点
1. **ダッシュボード**: 基本的な統計情報が視覚的に分かりやすい
2. **顧客管理**: 詳細ダイアログが充実（訪問履歴、家カルテ、基本情報）
3. **分析画面**: グラフが美しく、データ可視化が優れている
4. **デザイン**: モダンで清潔感のあるUI

### ⚠️ 改善が必要な点

#### 1. **予約一覧ページ**
- ❌ **フィルタリング機能がない**: ステータス、日付、支払い状況で絞り込めない
- ❌ **ソート機能がない**: 日付順以外の並び替えができない
- ❌ **検索機能がない**: 顧客名や電話番号で検索できない
- ❌ **一括操作がない**: 複数予約の一括ステータス変更ができない
- ❌ **ページネーションがない**: 100件制限で、それ以上は表示されない
- ❌ **エクスポート機能がない**: CSV/Excel出力ができない

#### 2. **カレンダーページ**
- ❌ **月表示がない**: 日付選択のみで、月全体の見通しが悪い
- ❌ **ドラッグ&ドロップがない**: 予約の時間変更ができない
- ❌ **スタッフ別フィルタがない**: 特定スタッフのスケジュールが見えない
- ❌ **空き枠表示がない**: 空いている時間帯が分からない

#### 3. **サービス管理ページ**
- ❌ **カテゴリ分類がない**: サービスをグループ化できない
- ❌ **並び順変更がない**: 表示順をカスタマイズできない
- ❌ **一括編集がない**: 複数サービスの料金を一括変更できない

#### 4. **スタッフ管理ページ**
- ❌ **シフト管理がない**: スタッフのシフト登録・編集ができない
- ❌ **稼働状況が見えない**: スタッフの稼働率や予約数が分からない

#### 5. **全体的な問題**
- ❌ **モバイル対応が不十分**: サイドバーが非表示（`hidden md:flex`）
- ❌ **キーボードショートカットがない**: 効率的な操作ができない
- ❌ **エラーハンドリングが不十分**: `alert()` を使用（UXが悪い）
- ❌ **ローディング状態が統一されていない**: ページごとに異なる
- ❌ **空状態のデザインが不統一**: ページごとに異なる

---

## 🎯 改善提案（優先度順）

### 🔴 最優先（Must Have）

#### 1. 予約一覧のフィルタリング・検索機能
```typescript
// 追加すべき機能
- ステータスフィルタ（確定/承認待ち/キャンセル）
- 支払い状況フィルタ（支払済/未払い）
- 日付範囲フィルタ（開始日〜終了日）
- 顧客名・電話番号検索
- ソート（日付順/金額順/顧客名順）
- ページネーション（20件/50件/100件）
```

**実装例**:
```tsx
// src/app/admin/bookings/page.tsx に追加
const [filters, setFilters] = useState({
  status: 'all',
  paymentStatus: 'all',
  dateRange: { start: null, end: null },
  searchQuery: '',
  sortBy: 'date',
  sortOrder: 'desc',
  page: 1,
  perPage: 20
});
```

#### 2. カレンダーページの月表示
```typescript
// 追加すべき機能
- 月表示カレンダー（FullCalendar等のライブラリ使用）
- ドラッグ&ドロップで予約時間変更
- スタッフ別フィルタ
- 空き枠の可視化（グレーアウト）
```

**推奨ライブラリ**: `@fullcalendar/react` または `react-big-calendar`

#### 3. モバイル対応の改善
```typescript
// サイドバーをモバイルでも表示可能に
- ハンバーガーメニューを追加
- ドロワーメニュー（スライドイン）を実装
- タッチ操作に最適化
```

#### 4. エラーハンドリングの統一
```typescript
// alert() を廃止し、Toast通知に統一
import { toast } from '@/components/ui/toast';

// 使用例
toast.error('予約の取得に失敗しました');
toast.success('予約を更新しました');
```

---

### 🟡 高優先度（Should Have）

#### 5. 予約一覧の一括操作
```typescript
// 追加すべき機能
- チェックボックスで複数選択
- 一括ステータス変更（確定/キャンセル）
- 一括支払い状況変更
- 一括CSV出力
```

#### 6. サービス管理の改善
```typescript
// 追加すべき機能
- カテゴリ分類（例: クリーニング/メンテナンス/その他）
- 並び順のドラッグ&ドロップ変更
- 一括料金変更（例: 全サービス10%値上げ）
- サービス画像のアップロード
```

#### 7. スタッフ管理のシフト機能
```typescript
// 追加すべき機能
- 週次/月次シフト登録
- シフトテンプレート機能
- スタッフ別稼働状況ダッシュボード
- シフトと予約の自動マッチング
```

#### 8. キーボードショートカット
```typescript
// 追加すべきショートカット
- Cmd/Ctrl + K: グローバル検索
- Cmd/Ctrl + N: 新規予約作成
- Cmd/Ctrl + F: フィルタ表示
- Esc: モーダル/ダイアログを閉じる
```

---

### 🟢 中優先度（Nice to Have）

#### 9. ダッシュボードの強化
```typescript
// 追加すべき機能
- 日付範囲選択（今月/先月/カスタム）
- グラフの詳細表示（クリックで拡大）
- 目標設定と進捗表示
- アラート通知（承認待ち予約、未払い予約）
```

#### 10. 顧客管理の強化
```typescript
// 追加すべき機能
- 顧客タグ機能（VIP/要フォロー等）
- 顧客メモのリッチテキスト対応
- 顧客別の予約履歴グラフ
- リピート率の可視化
```

#### 11. 通知・アラート機能
```typescript
// 追加すべき機能
- リアルタイム通知（WebSocket）
- 承認待ち予約の通知
- 未払い予約のリマインダー
- スタッフアサイン待ちの通知
```

---

## 🎨 UI/UX改善の具体例

### 例1: 予約一覧のフィルタバー

```tsx
// 改善前: フィルタなし
<div className="flex justify-between items-center">
  <h1 className="text-2xl font-bold">予約台帳</h1>
  <Button>＋ 電話予約登録</Button>
</div>

// 改善後: フィルタバー追加
<div className="space-y-4">
  <div className="flex justify-between items-center">
    <h1 className="text-2xl font-bold">予約台帳</h1>
    <Button>＋ 電話予約登録</Button>
  </div>
  
  {/* フィルタバー */}
  <Card className="p-4">
    <div className="flex flex-wrap gap-4 items-center">
      <Select value={filters.status} onValueChange={...}>
        <SelectTrigger className="w-40">
          <SelectValue placeholder="ステータス" />
        </SelectTrigger>
        <SelectContent>
          <SelectItem value="all">すべて</SelectItem>
          <SelectItem value="confirmed">確定</SelectItem>
          <SelectItem value="pending">承認待ち</SelectItem>
          <SelectItem value="cancelled">キャンセル</SelectItem>
        </SelectContent>
      </Select>
      
      <Input
        placeholder="顧客名・電話番号で検索..."
        value={filters.searchQuery}
        onChange={...}
        className="w-64"
      />
      
      <DateRangePicker
        startDate={filters.dateRange.start}
        endDate={filters.dateRange.end}
        onChange={...}
      />
      
      <Button variant="outline" onClick={resetFilters}>
        リセット
      </Button>
    </div>
  </Card>
</div>
```

### 例2: カレンダーページの月表示

```tsx
// 改善前: 日付選択のみ
<Calendar mode="single" selected={date} onSelect={setDate} />

// 改善後: FullCalendarを使用
import FullCalendar from '@fullcalendar/react';
import dayGridPlugin from '@fullcalendar/daygrid';
import timeGridPlugin from '@fullcalendar/timegrid';
import interactionPlugin from '@fullcalendar/interaction';

<FullCalendar
  plugins={[dayGridPlugin, timeGridPlugin, interactionPlugin]}
  initialView="dayGridMonth"
  events={bookings.map(b => ({
    id: b.id,
    title: `${b.customers?.name} - ${b.booking_items[0]?.services?.title}`,
    start: b.start_time,
    end: b.end_time,
    backgroundColor: b.status === 'confirmed' ? '#10B981' : '#F59E0B',
  }))}
  editable={true}
  eventDrop={handleEventDrop}
  eventClick={handleEventClick}
  headerToolbar={{
    left: 'prev,next today',
    center: 'title',
    right: 'dayGridMonth,timeGridWeek,timeGridDay'
  }}
/>
```

### 例3: モバイル対応のサイドバー

```tsx
// 改善前: hidden md:flex（モバイルで非表示）
<aside className="w-64 bg-card border-r hidden md:flex flex-col">

// 改善後: ドロワーメニュー
import { Sheet, SheetContent, SheetTrigger } from '@/components/ui/sheet';
import { Menu } from 'lucide-react';

<>
  {/* デスクトップ: 通常のサイドバー */}
  <aside className="w-64 bg-card border-r hidden md:flex flex-col">
    {/* ... */}
  </aside>
  
  {/* モバイル: ハンバーガーメニュー */}
  <Sheet>
    <SheetTrigger asChild className="md:hidden fixed top-4 left-4 z-50">
      <Button variant="outline" size="icon">
        <Menu className="h-4 w-4" />
      </Button>
    </SheetTrigger>
    <SheetContent side="left" className="w-64 p-0">
      <nav className="p-4 space-y-2">
        {/* サイドバーの内容をコピー */}
      </nav>
    </SheetContent>
  </Sheet>
</>
```

---

## 📱 モバイル最適化チェックリスト

- [ ] サイドバーをドロワーメニューに変更
- [ ] テーブルを横スクロール可能に
- [ ] カード形式のレイアウトを追加
- [ ] タッチターゲットを44px以上に
- [ ] フォントサイズを16px以上に
- [ ] 入力フィールドの自動ズームを防止

---

## 🚀 実装優先順位

### Phase 1（1-2週間）
1. ✅ 予約一覧のフィルタリング・検索機能
2. ✅ エラーハンドリングの統一（Toast通知）
3. ✅ モバイル対応の改善（ドロワーメニュー）

### Phase 2（2-3週間）
4. ✅ カレンダーページの月表示
5. ✅ 予約一覧の一括操作
6. ✅ ページネーション

### Phase 3（3-4週間）
7. ✅ サービス管理の改善
8. ✅ スタッフ管理のシフト機能
9. ✅ キーボードショートカット

---

## 📊 改善効果の測定指標

### 定量指標
- **操作時間の短縮**: 予約検索時間を50%削減
- **エラー率の削減**: 操作ミスを30%削減
- **モバイル利用率**: モバイルからのアクセスを20%向上

### 定性指標
- **ユーザー満足度**: アンケートで4.5/5.0以上
- **学習コスト**: 新規ユーザーが30分以内に基本操作を習得
- **視認性**: 重要な情報が3秒以内に認識可能

---

## 🎯 結論

現状の管理画面は**基本的な機能は揃っているが、「抜群」「最高」レベルには達していない**。

**主な課題**:
1. フィルタリング・検索機能の不足
2. モバイル対応の不十分さ
3. 一括操作の欠如
4. エラーハンドリングの不統一

**改善により期待できる効果**:
- 事業者の作業効率が大幅に向上
- モバイルからの利用が可能になり、現場での操作性が向上
- エラーが減り、ユーザー満足度が向上

**次のステップ**: Phase 1の実装から開始し、段階的に改善を進める。

---

© 2024 株式会社Amber. All rights reserved.



