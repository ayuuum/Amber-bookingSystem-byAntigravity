# System Design Principles

## 概要

このシステムは、
**人が判断し続けなくても回り続ける業務**を前提として設計されている。

そのため、

* 即時の完全性
* 手順通りの処理
* 人による逐次確認

を前提とした設計は採用しない。

本 README は、技術選定・実装・リファクタリング・スケール時に
常に立ち返るべき **設計原則（Design Principles）** を定義する。

---

## 原則 1：人の判断を前提にしない

このシステムは、
人が毎回考え、指示し、確認することを前提にしてはならない。

判断はシステムが行い、
人は監督・例外対応・改善に集中する。

人の関与は「前提条件」ではなく「最終手段」である。

---

## 原則 2：業務は手順ではなく状態として扱う

業務を
「Aをして、次にBをする」
という手順の集合として設計しない。

代わりに、

* いま何が起きたか
* 状態がどう変化したか
* 次に満たすべき条件は何か

という **状態遷移** として扱う。

重要なのは過程ではなく、
最終的にどの状態に到達したかである。

---

## 原則 3：即時の正しさより最終的な正しさを優先する

すべてをその場で完全に整合させることを目標としない。

* まず応答する
* 後で揃える
* 失敗したらやり直す

一時的な不整合は失敗ではない。
**回復できないことだけが失敗である。**

---

## 原則 4：失敗は例外ではなく通常状態である

通信失敗、外部サービス停止、重複処理は必ず発生する。

それらを例外として扱わず、
**最初から起きるものとして設計に組み込む。**

* 再試行できること
* 冪等であること
* 後から回復できること

は必須条件である。

---

## 原則 5：命令ではなく事実に反応する

システム内のコンポーネントは、
他のコンポーネントに直接命令しない。

代わりに、

* 何が起きたか
* どんな事実が発生したか

を共有し、
必要な部分だけがそれに反応する。

この構造により、部分的な停止や遅延が全体に波及しない。

---

## 原則 6：記憶は履歴ではなく経験として扱う

過去のデータは、
単なる記録や表示のためだけに保存しない。

それは、

* 次の判断に使えるか
* 類似状況を識別できるか
* 意思決定の質を上げるか

という観点で保持される。

記憶とはログではなく、**経験である。**

---

## 原則 7：強くするのではなく増やせるように作る

スケールとは、
一つのものを巨大にすることではない。

同じ役割のものを
自然に複製できる構造を持つことがスケールである。

---

## 原則 8：技術は思想を実現するための手段である

特定の言語、フレームワーク、ツールは
この思想を実現するための一時的な選択にすぎない。

技術は捨てられても、
この思想は捨てられてはならない。

---

## 設計憲章（1文）

> このシステムは、人が頑張らなくても回り続け、
> 失敗しても自ら立ち直り、
> 成長しても壊れないことを、
> 最初から当然の前提として設計する。


